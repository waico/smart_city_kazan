# smart_city_kazan
Implementation of functionality to improve the quality of life of the citizens of the great city of Kazan

Разработанное решение помогает жителям города следить за безопасностью и чистотой во дворах, планировать работу обслуживающих организаций за счёт статистического анализа данных.

Решение, в основе которого используется искусственный интеллект, позволяет решать следующие задачи:

- Контролировать заполненность контейнеров для мусора
- Детектировать возгарания и пожары во дворах
- Собирать статистику по вывозу мусора
- Давать предложения по измению графика вывоза мусора в каждом дворе, где установлены камеры

Стек решения: python, yolo, folium, streamlit.

Уникальность решения заключается в том, что оно позволяет получать отчёты на основе статистического анализа данных с уличных камер, повысить скорость реагирования профильных служб на инциденты, связанные с загрязнениями и возгараниями на территории жилих дворов. 

Сроки разработки: 3 месяца (разработка пилотной версии) ➕ 6-12 месяцев (пилотные испытания и доработка) ➕ 3-6 месяцев (промышленное внедрение).

Стоимость разработки: 

- 0,5 млн руб (разработка пилотной версии) 
- 2 млн руб (пилотные испытания и доработка) 
- 1 млн руб (промышленное внедрение)



## Установка и запуск приложения

Примечание: В репозиторий не была загружена модель нейронной сети с весами, в связи с тем, что она занимает достаточно большой объем памяти хранилища. Поэтому необходимо воспользоваться ссылкой, которая описана в структуре для ее скачивания. После скачивания модели, необходимо выполнить следующие действия:

- скачайте все содержимое папки GUI
- установите библиотеку `streamlit`

```terminal
pip install streamlit
```

- установите дополнительные библиотеки, необходимые для работы приложения из файла requirements.txt в скачанной папке GUI, используя команду:
  pip install -r requirements.txt 
- находясь в корневой директории репозитория выполните команду:  

```terminal
streamlit run app_fol5.py
```

автоматически откроется окно браузера и в нём загрузится сраница приложения
![#Рисунок 1 - Скриншот работы приложения](./scren1.png)

На карте, расположенной на главной странице приложения, пользователь может выбрать интересующие камеры, которые окрашены разными цветами в зависимости от произошедших событий и обнаруженных превышений мусорных отходов в баках. Красными маркерами на карте показаны камеры, по которым произошло превышение мусорных отходов, а зелеными маркерами изображены камеры с нормальной ситуацией (без превышений).

По каждой камере, по которой произошло превышение пользователь может получить подробный аналитический отчет нажав на соответствующую кнопку ниже (планировалось реализовать с помощью ссылки при наведении на камеру).

После изучения камер пользователь может нажать на кнопку, находяющуюся в нижней части приложения, чтобы выбрать камеры, по которым обнаружены превышения в мусорных контейнерах и загрузить изображения с них. После нажатия на кнопку выполнится автоматический анализ полученных снимков с камер на которых будут отмечены проценты заполненности мусорных баков с выделением самих баков с помощью bounding boxes.

![#Рисунок 2 - Скриншот работы приложения](./scren2.png)


Скринкаст приложения доступен по ссылке - https://drive.google.com/file/d/1hL9Wuo9yvklfcD44p85gNL73YZfNW7yA/view?usp=sharing

## Структура

- [OCR + geo_extract](./OCR + geo_extract) folder 
  - Это применение OCR к доступным картинкам для извлечения времени и адреса. 	
  - обработка исходных данных по связке адресов и папок исходных данных. 
  - пайплайн извлечение ширины и долготы по адресу
- [parser](./parser )  folder - автоматические сохранение картинок по яндексовому запросу, для обогащения датасета.  
- [stream_video](stream_video) folder - интеграция стриминг видео 
- [YOLO5_Train_Inference](yolo5x_train) folder - ноутбуки для обучения и инференса моделей, также содержит директорию weights с весами модели
- macro_micro_analytics - BI и анализ временных рядов загрузки контейнеров
